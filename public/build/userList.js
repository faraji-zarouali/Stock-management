(self["webpackChunk"] = self["webpackChunk"] || []).push([["userList"],{

/***/ "./assets/js/user_list.js":
/*!********************************!*\
  !*** ./assets/js/user_list.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

/* provided dependency */ var $ = __webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.js");
/* provided dependency */ var toastr = __webpack_require__(/*! toastr */ "./node_modules/toastr/toastr.js");
__webpack_require__(/*! core-js/modules/es.array.concat.js */ "./node_modules/core-js/modules/es.array.concat.js");
__webpack_require__(/*! core-js/modules/es.array.find.js */ "./node_modules/core-js/modules/es.array.find.js");
__webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
__webpack_require__(/*! core-js/modules/es.json.stringify.js */ "./node_modules/core-js/modules/es.json.stringify.js");
__webpack_require__(/*! core-js/modules/es.array.join.js */ "./node_modules/core-js/modules/es.array.join.js");
$(document).ready(function () {
  var table = $('#user-datatable').DataTable({
    processing: true,
    serverSide: true,
    pageLength: 8,
    lengthMenu: [[8, 25, 50, -1], [8, 25, 50, 'All']],
    ajax: {
      url: Routing.generate('app_user_getlist'),
      datasrc: function datasrc(d) {
        d.draw = d.draw || 0;
        d.start = d.start || 0;
        d.length = d.length || 15;
      }
    },
    order: [[0, 'asc']],
    columns: [{
      name: 'u.id',
      data: 'id',
      orderable: true,
      searchable: true
    }, {
      name: 'u.email',
      data: 'email',
      orderable: true,
      searchable: true
    }, {
      name: 'u.roles',
      data: 'roles',
      render: function render(data) {
        return data == 'ROLE_USER' ? 'ROLE_USER' : 'ROLE_ADMIN';
      }
    }, {
      name: 'u.status',
      data: 'status',
      render: function render(data) {
        var iconClass = data ? 'fas fa-user' : 'fas fa-user-slash';
        return '<i class="' + iconClass + '" ></i>';
      }
    }, {
      data: 'id',
      render: function render(data, type, row) {
        var deactivateButton = "<button class=\"btn btn-".concat(row.status ? 'danger' : 'secondary', " action-button\" data-user-id=\"").concat(data, "\">").concat(row.status ? 'Deactivate' : 'Activate', "</button>");
        var editButton = "<button class=\"btn btn-primary edit-button\" data-user-id=\"".concat(data, "\">Update</button>");
        return "".concat(deactivateButton, " ").concat(editButton);
      }
    }],
    dom: 'Bfrtip'
  });
  $('body').on('click', '#add-user-button', function () {
    $('#add-user-modal').modal('show');
  });
  $('#add-user-modal').on('click', '#add-user-btn', function () {
    var newUserEmail = $("#newUserEmail").val();
    var newUserRole = $('#newUserRole').find(":selected").val();
    var newUserPassword = $("#newUserPassword").val();
    var newUserData = {
      email: newUserEmail,
      role: newUserRole,
      password: newUserPassword
    };
    $.ajax({
      url: Routing.generate('app_new_user'),
      type: "POST",
      contentType: 'application/json',
      data: JSON.stringify(newUserData),
      success: function success(response, textStatus, xhr) {
        if (xhr.status === 200) {
          // Get the current page before reload
          var currentPage = table.page();
          // Reload the DataTable with AJAX
          table.ajax.reload(function () {
            // Set the table back to the previously stored page
            table.page(currentPage).draw('page');
          });
          $('#add-user-modal').modal('hide');
          $('#newUserEmail').val("");
          $('#newUserRole').val("ROLE_USER");
          $('#newUserPassword').val("");
          // Show success pop-up
          toastr["success"]("New User Added successfully", "Success");
        } else {
          console.error('Unexpected success status code:', xhr.status);
        }
      },
      error: function error(xhr) {
        // Handle errors
        if (xhr.status === 409) {
          toastr["error"]("Email is already in use");
        } else if (xhr.responseJSON && xhr.responseJSON.errors) {
          // Display validation errors to the user
          toastr["error"](xhr.responseJSON.errors);
        } else {
          // Handle other errors
          toastr["error"]('An error occurred');
        }
      }
    });
  });
  $('body').on('click', '.action-button', function () {
    var userId = $(this).data('user-id');
    $.ajax({
      url: Routing.generate('app_update_user_status', {
        id: userId
      }),
      type: "GET",
      success: function success(response, textStatus, xhr) {
        console.log(response);
        if (xhr.status === 200) {
          // Get the current page before reload
          var currentPage = table.page();
          // Reload the DataTable with AJAX
          table.ajax.reload(function () {
            // Set the table back to the previously stored page
            table.page(currentPage).draw('page');
          });
          // Show success pop-up
          toastr["success"]("Status Update successfully", "Success");
        } else {
          console.error('Unexpected success status code:', xhr.status);
        }
      },
      error: function error(xhr, status, _error) {
        console.error('Status Update failed:', _error);
        if (xhr.status >= 400 && xhr.status < 500) {
          alert('Status Update failed: Client error');
        } else if (xhr.status >= 500) {
          alert('Status Update failed: Server error');
        }
      }
    });
  });
  $('body').on('click', '.edit-button', function () {
    var userId = $(this).data('user-id');
    $.ajax({
      url: Routing.generate('app_get_user', {
        id: userId
      }),
      type: "GET",
      success: function success(dataResult) {
        $('#uId').val(dataResult.user.id);
        $('#email').val(dataResult.user.email);
        $('#role').val(dataResult.user.roles);
        $('#edit-modal').modal('show');
      }
    });
  });
  $('.modal').on('click', '#btnUpdateSubmit', function () {
    var updatedUserId = $("#uId").val();
    var updatedUserEmail = $("#email").val();
    var updatedUserRole = $('#role').find(":selected").val();
    var updatedUserData = {
      id: updatedUserId,
      email: updatedUserEmail,
      role: updatedUserRole
    };
    $.ajax({
      url: Routing.generate('app_update_user'),
      type: "POST",
      contentType: 'application/json',
      data: JSON.stringify(updatedUserData),
      success: function success(response, textStatus, xhr) {
        console.log(response);
        if (xhr.status === 200) {
          // Get the current page before reload
          var currentPage = table.page();
          // Reload the DataTable with AJAX
          table.ajax.reload(function () {
            // Set the table back to the previously stored page
            table.page(currentPage).draw('page');
          });
          $('#edit-modal').modal('hide');

          // Show success pop-up
          toastr["success"]("Update successfully", "Success");
        } else {
          console.error('Unexpected success status code:', xhr.status);
        }
      },
      error: function error(xhr) {
        // Handle errors
        if (xhr.responseJSON && xhr.responseJSON.errors) {
          toastr["error"](xhr.responseJSON.errors);
          // Display validation errors to the user
          toastr["error"]('Validation errors:\n' + xhr.responseJSON.errors.join('\n'));
        } else {
          // Handle other errors
          toastr["error"]('An error occurred');
        }
      }
    });
  });
});

/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, ["vendors-node_modules_jquery_dist_jquery_js","vendors-node_modules_toastr_toastr_js-node_modules_core-js_internals_array-species-create_js--4bb413","vendors-node_modules_core-js_modules_es_array_concat_js-node_modules_core-js_modules_es_array-5cd115"], () => (__webpack_exec__("./assets/js/user_list.js")));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ }
]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O01BQ0QwQixLQUFLLEVBQUUsU0FBQUEsTUFBVU4sR0FBRyxFQUFFO1FBQ3RCO1FBQ0EsSUFBSUEsR0FBRyxDQUFDTyxZQUFZLElBQUlQLEdBQUcsQ0FBQ08sWUFBWSxDQUFDQyxNQUFNLEVBQUU7VUFDN0NKLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQ0osR0FBRyxDQUFDTyxZQUFZLENBQUNDLE1BQU0sQ0FBQztVQUN4QztVQUNBSixNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsc0JBQXNCLEdBQUdKLEdBQUcsQ0FBQ08sWUFBWSxDQUFDQyxNQUFNLENBQUNZLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNoRixDQUFDLE1BQU07VUFDSDtVQUNBaEIsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLG1CQUFtQixDQUFDO1FBQ3hDO01BQ0o7SUFDQSxDQUFDLENBQUM7RUFFVixDQUFDLENBQUM7QUFFTixDQUFDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvdXNlcl9saXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgdmFyIHRhYmxlID0gJCgnI3VzZXItZGF0YXRhYmxlJykuRGF0YVRhYmxlKHtcclxuICAgICAgICBwcm9jZXNzaW5nOiB0cnVlLFxyXG4gICAgICAgIHNlcnZlclNpZGU6IHRydWUsXHJcbiAgICAgICAgcGFnZUxlbmd0aDogOCxcclxuICAgICAgICBsZW5ndGhNZW51OiBbXHJcbiAgICAgICAgICAgIFs4LCAyNSwgNTAsIC0xXSxcclxuICAgICAgICAgICAgWzgsIDI1LCA1MCwgJ0FsbCddXHJcbiAgICAgICAgXSxcclxuICAgICAgICBhamF4OiB7XHJcbiAgICAgICAgICAgIHVybDogUm91dGluZy5nZW5lcmF0ZSgnYXBwX3VzZXJfZ2V0bGlzdCcpLFxyXG4gICAgICAgICAgICBkYXRhc3JjIDogZnVuY3Rpb24oZCkge1xyXG4gICAgICAgICAgICAgICAgZC5kcmF3ID0gZC5kcmF3IHx8IDA7XHJcbiAgICAgICAgICAgICAgICBkLnN0YXJ0ID0gZC5zdGFydCB8fCAwO1xyXG4gICAgICAgICAgICAgICAgZC5sZW5ndGggPSBkLmxlbmd0aCB8fCAxNTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9yZGVyOiBbWzAsICdhc2MnXV0sXHJcbiAgICAgICAgY29sdW1uczogW1xyXG4gICAgICAgICAgICB7bmFtZTogJ3UuaWQnLCBkYXRhOiAnaWQnLCBvcmRlcmFibGU6IHRydWUgLCBzZWFyY2hhYmxlOiB0cnVlfSxcclxuICAgICAgICAgICAge25hbWU6ICd1LmVtYWlsJywgZGF0YTogJ2VtYWlsJywgb3JkZXJhYmxlOiB0cnVlICwgc2VhcmNoYWJsZTogdHJ1ZX0sXHJcbiAgICAgICAgICAgIHsgXHJcbiAgICAgICAgICAgICAgICBuYW1lOiAndS5yb2xlcycsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiAncm9sZXMnLFxyXG4gICAgICAgICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEgPT0gJ1JPTEVfVVNFUicgPyAnUk9MRV9VU0VSJyA6ICdST0xFX0FETUlOJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgeyAgIFxyXG4gICAgICAgICAgICAgICAgbmFtZTogJ3Uuc3RhdHVzJyxcclxuICAgICAgICAgICAgICAgIGRhdGE6ICdzdGF0dXMnLFxyXG4gICAgICAgICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGljb25DbGFzcyA9IGRhdGEgPyAnZmFzIGZhLXVzZXInIDogJ2ZhcyBmYS11c2VyLXNsYXNoJztcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJzxpIGNsYXNzPVwiJyArIGljb25DbGFzcyArICdcIiA+PC9pPic7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiAnaWQnLFxyXG4gICAgICAgICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbihkYXRhLCB0eXBlLCByb3cpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGVhY3RpdmF0ZUJ1dHRvbiA9IGA8YnV0dG9uIGNsYXNzPVwiYnRuIGJ0bi0ke3Jvdy5zdGF0dXMgPyAnZGFuZ2VyJyA6ICdzZWNvbmRhcnknfSBhY3Rpb24tYnV0dG9uXCIgZGF0YS11c2VyLWlkPVwiJHtkYXRhfVwiPiR7cm93LnN0YXR1cyA/ICdEZWFjdGl2YXRlJyA6ICdBY3RpdmF0ZSd9PC9idXR0b24+YDtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZWRpdEJ1dHRvbiA9IGA8YnV0dG9uIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IGVkaXQtYnV0dG9uXCIgZGF0YS11c2VyLWlkPVwiJHtkYXRhfVwiPlVwZGF0ZTwvYnV0dG9uPmA7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGAke2RlYWN0aXZhdGVCdXR0b259ICR7ZWRpdEJ1dHRvbn1gO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXSxcclxuICAgICAgICBkb206ICdCZnJ0aXAnLFxyXG4gICAgfSk7XHJcblxyXG4gICAgXHJcbiAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJyNhZGQtdXNlci1idXR0b24nLCBmdW5jdGlvbigpIHsgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI2FkZC11c2VyLW1vZGFsJykubW9kYWwoJ3Nob3cnKTsgICAgIFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcblxyXG5cclxuICAgICQoJyNhZGQtdXNlci1tb2RhbCcpLm9uKCdjbGljaycsICcjYWRkLXVzZXItYnRuJywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgbmV3VXNlckVtYWlsID0gJChcIiNuZXdVc2VyRW1haWxcIikudmFsKCk7XHJcbiAgICAgICAgICAgIHZhciBuZXdVc2VyUm9sZSA9ICQoJyNuZXdVc2VyUm9sZScpLmZpbmQoXCI6c2VsZWN0ZWRcIikudmFsKCk7XHJcbiAgICAgICAgICAgIHZhciBuZXdVc2VyUGFzc3dvcmQgPSAkKFwiI25ld1VzZXJQYXNzd29yZFwiKS52YWwoKTtcclxuICAgICAgICAgICAgdmFyIG5ld1VzZXJEYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgZW1haWw6IG5ld1VzZXJFbWFpbCxcclxuICAgICAgICAgICAgICAgIHJvbGU6IG5ld1VzZXJSb2xlLFxyXG4gICAgICAgICAgICAgICAgcGFzc3dvcmQ6IG5ld1VzZXJQYXNzd29yZCxcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICBSb3V0aW5nLmdlbmVyYXRlKCdhcHBfbmV3X3VzZXInKSxcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KG5ld1VzZXJEYXRhKSxcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3BvbnNlLCB0ZXh0U3RhdHVzLCB4aHIpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHhoci5zdGF0dXMgPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIGN1cnJlbnQgcGFnZSBiZWZvcmUgcmVsb2FkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50UGFnZSA9IHRhYmxlLnBhZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVsb2FkIHRoZSBEYXRhVGFibGUgd2l0aCBBSkFYXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmFqYXgucmVsb2FkKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIHRhYmxlIGJhY2sgdG8gdGhlIHByZXZpb3VzbHkgc3RvcmVkIHBhZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLnBhZ2UoY3VycmVudFBhZ2UpLmRyYXcoJ3BhZ2UnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNhZGQtdXNlci1tb2RhbCcpLm1vZGFsKCdoaWRlJyk7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjbmV3VXNlckVtYWlsJykudmFsKFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjbmV3VXNlclJvbGUnKS52YWwoXCJST0xFX1VTRVJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNuZXdVc2VyUGFzc3dvcmQnKS52YWwoXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNob3cgc3VjY2VzcyBwb3AtdXBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RyW1wic3VjY2Vzc1wiXShcIk5ldyBVc2VyIEFkZGVkIHN1Y2Nlc3NmdWxseVwiLCBcIlN1Y2Nlc3NcIilcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbmV4cGVjdGVkIHN1Y2Nlc3Mgc3RhdHVzIGNvZGU6JywgeGhyLnN0YXR1cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBIYW5kbGUgZXJyb3JzXHJcbiAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PT0gNDA5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0cltcImVycm9yXCJdKFwiRW1haWwgaXMgYWxyZWFkeSBpbiB1c2VcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoeGhyLnJlc3BvbnNlSlNPTiAmJiB4aHIucmVzcG9uc2VKU09OLmVycm9ycykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIERpc3BsYXkgdmFsaWRhdGlvbiBlcnJvcnMgdG8gdGhlIHVzZXJcclxuICAgICAgICAgICAgICAgICAgICB0b2FzdHJbXCJlcnJvclwiXSh4aHIucmVzcG9uc2VKU09OLmVycm9ycyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBvdGhlciBlcnJvcnNcclxuICAgICAgICAgICAgICAgICAgICB0b2FzdHJbXCJlcnJvclwiXSgnQW4gZXJyb3Igb2NjdXJyZWQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTsgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgfSk7XHJcblxyXG5cclxuXHJcbiAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJy5hY3Rpb24tYnV0dG9uJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHVzZXJJZCA9ICQodGhpcykuZGF0YSgndXNlci1pZCcpO1xyXG4gICAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgdXJsOiBSb3V0aW5nLmdlbmVyYXRlKCdhcHBfdXBkYXRlX3VzZXJfc3RhdHVzJyx7aWQ6dXNlcklkfSksXHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXNwb25zZSwgdGV4dFN0YXR1cywgeGhyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4aHIuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gR2V0IHRoZSBjdXJyZW50IHBhZ2UgYmVmb3JlIHJlbG9hZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudFBhZ2UgPSB0YWJsZS5wYWdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbG9hZCB0aGUgRGF0YVRhYmxlIHdpdGggQUpBWFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5hamF4LnJlbG9hZChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2V0IHRoZSB0YWJsZSBiYWNrIHRvIHRoZSBwcmV2aW91c2x5IHN0b3JlZCBwYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5wYWdlKGN1cnJlbnRQYWdlKS5kcmF3KCdwYWdlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTaG93IHN1Y2Nlc3MgcG9wLXVwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0cltcInN1Y2Nlc3NcIl0oXCJTdGF0dXMgVXBkYXRlIHN1Y2Nlc3NmdWxseVwiLCBcIlN1Y2Nlc3NcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignVW5leHBlY3RlZCBzdWNjZXNzIHN0YXR1cyBjb2RlOicsIHhoci5zdGF0dXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLCBzdGF0dXMsIGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdTdGF0dXMgVXBkYXRlIGZhaWxlZDonLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHhoci5zdGF0dXMgPj0gNDAwICYmIHhoci5zdGF0dXMgPCA1MDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdTdGF0dXMgVXBkYXRlIGZhaWxlZDogQ2xpZW50IGVycm9yJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh4aHIuc3RhdHVzID49IDUwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ1N0YXR1cyBVcGRhdGUgZmFpbGVkOiBTZXJ2ZXIgZXJyb3InKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnYm9keScpLm9uKCdjbGljaycsICcuZWRpdC1idXR0b24nLCBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgdXNlcklkID0gJCh0aGlzKS5kYXRhKCd1c2VyLWlkJyk7XHJcbiAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICB1cmw6IFJvdXRpbmcuZ2VuZXJhdGUoJ2FwcF9nZXRfdXNlcicsIHtpZDp1c2VySWR9KSxcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGFSZXN1bHQpeyAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3VJZCcpLnZhbChkYXRhUmVzdWx0LnVzZXIuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjZW1haWwnKS52YWwoZGF0YVJlc3VsdC51c2VyLmVtYWlsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3JvbGUnKS52YWwoZGF0YVJlc3VsdC51c2VyLnJvbGVzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNlZGl0LW1vZGFsJykubW9kYWwoJ3Nob3cnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnLm1vZGFsJykub24oJ2NsaWNrJywgJyNidG5VcGRhdGVTdWJtaXQnLCBmdW5jdGlvbigpIHtcclxuICAgIFxyXG4gICAgICAgIHZhciB1cGRhdGVkVXNlcklkID0gJChcIiN1SWRcIikudmFsKCk7XHJcbiAgICAgICAgdmFyIHVwZGF0ZWRVc2VyRW1haWwgPSAkKFwiI2VtYWlsXCIpLnZhbCgpO1xyXG4gICAgICAgIHZhciB1cGRhdGVkVXNlclJvbGUgPSAkKCcjcm9sZScpLmZpbmQoXCI6c2VsZWN0ZWRcIikudmFsKCk7XHJcbiAgICAgICAgdmFyIHVwZGF0ZWRVc2VyRGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiB1cGRhdGVkVXNlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6IHVwZGF0ZWRVc2VyRW1haWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2xlOiB1cGRhdGVkVXNlclJvbGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgIHVybDogUm91dGluZy5nZW5lcmF0ZSgnYXBwX3VwZGF0ZV91c2VyJyksXHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh1cGRhdGVkVXNlckRhdGEpLFxyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzcG9uc2UsIHRleHRTdGF0dXMsIHhocikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdldCB0aGUgY3VycmVudCBwYWdlIGJlZm9yZSByZWxvYWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRQYWdlID0gdGFibGUucGFnZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWxvYWQgdGhlIERhdGFUYWJsZSB3aXRoIEFKQVhcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuYWpheC5yZWxvYWQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgdGFibGUgYmFjayB0byB0aGUgcHJldmlvdXNseSBzdG9yZWQgcGFnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUucGFnZShjdXJyZW50UGFnZSkuZHJhdygncGFnZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI2VkaXQtbW9kYWwnKS5tb2RhbCgnaGlkZScpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2hvdyBzdWNjZXNzIHBvcC11cFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2FzdHJbXCJzdWNjZXNzXCJdKFwiVXBkYXRlIHN1Y2Nlc3NmdWxseVwiLCBcIlN1Y2Nlc3NcIilcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbmV4cGVjdGVkIHN1Y2Nlc3Mgc3RhdHVzIGNvZGU6JywgeGhyLnN0YXR1cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBIYW5kbGUgZXJyb3JzXHJcbiAgICAgICAgICAgICAgICBpZiAoeGhyLnJlc3BvbnNlSlNPTiAmJiB4aHIucmVzcG9uc2VKU09OLmVycm9ycykgeyAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RyW1wiZXJyb3JcIl0oeGhyLnJlc3BvbnNlSlNPTi5lcnJvcnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIERpc3BsYXkgdmFsaWRhdGlvbiBlcnJvcnMgdG8gdGhlIHVzZXJcclxuICAgICAgICAgICAgICAgICAgICB0b2FzdHJbXCJlcnJvclwiXSgnVmFsaWRhdGlvbiBlcnJvcnM6XFxuJyArIHhoci5yZXNwb25zZUpTT04uZXJyb3JzLmpvaW4oJ1xcbicpKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSGFuZGxlIG90aGVyIGVycm9yc1xyXG4gICAgICAgICAgICAgICAgICAgIHRvYXN0cltcImVycm9yXCJdKCdBbiBlcnJvciBvY2N1cnJlZCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgfSk7XHJcblxyXG59KTsiXSwibmFtZXMiOlsiJCIsImRvY3VtZW50IiwicmVhZHkiLCJ0YWJsZSIsIkRhdGFUYWJsZSIsInByb2Nlc3NpbmciLCJzZXJ2ZXJTaWRlIiwicGFnZUxlbmd0aCIsImxlbmd0aE1lbnUiLCJhamF4IiwidXJsIiwiUm91dGluZyIsImdlbmVyYXRlIiwiZGF0YXNyYyIsImQiLCJkcmF3Iiwic3RhcnQiLCJsZW5ndGgiLCJvcmRlciIsImNvbHVtbnMiLCJuYW1lIiwiZGF0YSIsIm9yZGVyYWJsZSIsInNlYXJjaGFibGUiLCJyZW5kZXIiLCJpY29uQ2xhc3MiLCJ0eXBlIiwicm93IiwiZGVhY3RpdmF0ZUJ1dHRvbiIsImNvbmNhdCIsInN0YXR1cyIsImVkaXRCdXR0b24iLCJkb20iLCJvbiIsIm1vZGFsIiwibmV3VXNlckVtYWlsIiwidmFsIiwibmV3VXNlclJvbGUiLCJmaW5kIiwibmV3VXNlclBhc3N3b3JkIiwibmV3VXNlckRhdGEiLCJlbWFpbCIsInJvbGUiLCJwYXNzd29yZCIsImNvbnRlbnRUeXBlIiwiSlNPTiIsInN0cmluZ2lmeSIsInN1Y2Nlc3MiLCJyZXNwb25zZSIsInRleHRTdGF0dXMiLCJ4aHIiLCJjdXJyZW50UGFnZSIsInBhZ2UiLCJyZWxvYWQiLCJ0b2FzdHIiLCJjb25zb2xlIiwiZXJyb3IiLCJyZXNwb25zZUpTT04iLCJlcnJvcnMiLCJ1c2VySWQiLCJpZCIsImxvZyIsImFsZXJ0IiwiZGF0YVJlc3VsdCIsInVzZXIiLCJyb2xlcyIsInVwZGF0ZWRVc2VySWQiLCJ1cGRhdGVkVXNlckVtYWlsIiwidXBkYXRlZFVzZXJSb2xlIiwidXBkYXRlZFVzZXJEYXRhIiwiam9pbiJdLCJzb3VyY2VSb290IjoiIn0=