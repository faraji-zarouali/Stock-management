(self.webpackChunk=self.webpackChunk||[]).push([[958],{2161:(e,t,r)=>{var a=r(9755),o=r(8901);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function n(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!==c(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===c(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(4338),r(5728),r(228),r(8324),r(560),r(4284),r(9373),r(9903),r(9749),r(6544),r(1057),r(8932),r(9288),r(739),r(4254),r(752),r(1694),r(6265),a(document).ready((function(){var e=a("#change-status-btn");e.hide();var t=a("#product-datatable").DataTable(n({processing:!0,serverSide:!0,pagingTag:"button",lengthMenu:[[15,25,50,100],[15,25,50,100]],autoWidth:!1,ajax:{url:Routing.generate("app_product_get_list"),datasrc:function(e){e.draw=e.draw||0,e.start=e.start||0,e.length=e.length||15}},order:[[1,"asc"]],columns:[{data:"status",render:function(e,t,r){return e?'<input type="checkbox" class="product-checkbox" data-product-id="'+r.id+'">':'<input type="checkbox" class="product-checkbox" disabled checked>'},orderable:!1},{name:"p.id",data:"id",orderable:!0,searchable:!0},{name:"p.name",data:"product_name",orderable:!0,searchable:!0},{name:"p.price",data:"product_price",render:function(e){return"".concat(e," DH")}},{name:"p.quantity",data:"product_quantity",orderable:!0},{name:"s.name",data:"supplier_name",searchable:!0},{name:"c.name",data:"category_name",searchable:!0},{data:"status",render:function(e){return'<i class="'+(e?"far fa-check-circle text-success":"far fa-times-circle text-danger")+'" style="font-size: 16px;"></i>'},orderable:!1},{data:"id",render:function(e,t,r){var a='<a class="dropdown-item edit-button" data-product-id="'.concat(e,'" ><i class="fas fa-edit"></i> Update</a>'),o='<a class="dropdown-item extract-pdf-button" data-product-id="'.concat(e,'" ><i class="fas fa-file-pdf"></i> Extract PDF</a>'),c='<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">\n                            '.concat(a,"\n                            ").concat(o,"\n                        </div>");return'<div class="dropdown-table">\n                    '.concat('<button class="buttonDropDownRow" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="cursor: default;">\n                    <i class="fa fa-ellipsis-h"></i>\n                        </button>',"\n                    ").concat(c,"\n                    </div>")},orderable:!1}],pagingType:"simple_numbers",language:{loadingRecords:"&nbsp;",processing:"<span><i class='fa fa-spinner fa-spin fa-lg' style='font-size: 28px;'></i><br>Processing...</span>",searchPlaceholder:"Search",search:""}},"autoWidth",!1));a("body").on("click","#add-product-button",(function(){a("#add-product-modal").modal("show")})),a("#add-product-modal").on("click","#add-product-btn",(function(){var e={name:a("#newProductName").val(),price:a("#newProductPrice").val(),quantity:a("#newProductQuantity").val(),supplier:a("#newProductSupplier").find(":selected").val(),category:a("#newProductCategory").find(":selected").val()};a.ajax({url:Routing.generate("app_new_product"),type:"POST",contentType:"application/json",data:JSON.stringify(e),success:function(e,r,c){200===c.status?(t.ajax.reload(null,!1),a("#add-product-modal").modal("hide"),a("#newProductName").val(""),a("#newProductPrice").val(""),a("#newProductQuantity").val(""),a("#newProductSupplier").val(""),a("#newProductCategory").val(""),o.success("New Product Added successfully","Success")):console.error("Unexpected success status code:",c.status)},error:function(e){e.responseJSON&&e.responseJSON.errors?o.error(e.responseJSON.errors):o.error("An error occurred")}})})),a("#product-datatable tbody").on("click","tr",(function(r){a(this).find("td:last");if(a(r.target).closest("td").index()!==a(this).find("td").length-1){var o,c,n=a(this).find(".product-checkbox");a(r.target).is(":checkbox")?n.prop("checked")?a(this).addClass("selected-row"):a(this).removeClass("selected-row"):n.prop("disabled")||(n.prop("checked",!n.prop("checked")),n.prop("checked")?a(this).addClass("selected-row"):a(this).removeClass("selected-row")),a(".product-checkbox:checked",t.rows().nodes()).length>0?e.show():e.hide(),o=a(".product-checkbox:enabled:checked").length,c=a(".product-checkbox:enabled").length,a("#select_all").prop("checked",o===c),a("#select_all").toggleClass("indeterminate",o>0&&o<c),e.toggle(o>0)}})),a("#select_all").on("change",(function(){var r=a(this).prop("checked");a(".product-checkbox:enabled",t.rows().nodes()).prop("checked",r),r?a("#product-datatable tbody tr:has(:checkbox:enabled)").addClass("selected-row"):a("#product-datatable tbody tr:has(:checkbox:enabled)").removeClass("selected-row"),e.toggle(a(".product-checkbox:checked",t.rows().nodes()).length>0),r?e.show():e.hide(),a("#select_all").removeClass("indeterminate")})),a("#product-datatable tbody").on("change",".product-checkbox",(function(){var t=a(".product-checkbox:enabled:checked").length,r=a(".product-checkbox:enabled").length;a("#select_all").prop("checked",t===r),t>0&&t<r?a("#select_all").addClass("indeterminate"):a("#select_all").removeClass("indeterminate"),e.toggle(t>0)})),e.toggle(a(".product-checkbox:checked",t.rows().nodes()).length>0),e.on("click",(function(){swalWithBootstrapButtons.fire({showClass:{popup:"animatedSwal flipInX faster"},position:"top",title:"Confirmation ?",text:"do u really want to desactivate this product?",type:"warning",showCancelButton:!0,showCloseButton:!0,confirmButtonClass:"btn btn-success",confirmButtonText:"<i class='fa fa-check'></i> Yes !",cancelButtonText:"<i class='fa fa-times'></i> No !"}).then((function(r){if(r.value){var c=[];a(".product-checkbox:checked",t.rows().nodes()).each((function(){c.push(a(this).data("product-id"))})),a.ajax({url:Routing.generate("app_update_product_status"),type:"POST",contentType:"application/json;charset=utf-8",data:JSON.stringify({productIds:c}),success:function(r){t.ajax.reload(null,!1),a("#select_all").prop("checked",!1),e.hide(),o.success("Status changed successfully","Success"),a("#select_all").removeClass("indeterminate")},error:function(e){console.error(e)}})}else o.info("Demande annulÃ©e !")}))})),a("body").on("click",".edit-button",(function(){var e=a(this).data("product-id");a.ajax({url:Routing.generate("app_get_product",{id:e}),type:"GET",success:function(e){a("#pId").val(e.product.id),a("#editProductName").val(e.product.name),a("#editProductPrice").val(e.product.price),a("#editProductQuantity").val(e.product.quantity),a("#editProductSupplier").val(e.product.supplier),a("#editProductCategory").val(e.product.category),a("#edit-product-modal").modal("show")}})})),a(".modal").on("click","#btnUpdateSubmit",(function(){var e={id:a("#pId").val(),name:a("#editProductName").val(),price:a("#editProductPrice").val(),quantity:a("#editProductQuantity").val(),supplier:a("#editProductSupplier").find(":selected").val(),category:a("#editProductCategory").find(":selected").val()};a.ajax({url:Routing.generate("app_update_product"),type:"POST",contentType:"application/json",data:JSON.stringify(e),success:function(e,r,c){console.log(e),200===c.status?(t.ajax.reload(null,!1),a("#edit-product-modal").modal("hide"),o.success("Update successfully","Success")):console.error("Unexpected success status code:",c.status)},error:function(e){e.responseJSON&&e.responseJSON.errors?o.error(e.responseJSON.errors):o.error("An error occurred")}})})),a("body").on("click",".extract-pdf-button",(function(){var e=a(this).data("product-id"),t=Routing.generate("export_to_pdf",{id:e});window.open(t,"_blank")}))}))},9042:(e,t,r)=>{"use strict";var a=r(3689),o=r(4201),c=r(3615),n=o("species");e.exports=function(e){return c>=51||!a((function(){var t=[];return(t.constructor={})[n]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},4338:(e,t,r)=>{"use strict";var a=r(9989),o=r(3689),c=r(2297),n=r(8999),d=r(690),s=r(6310),i=r(5565),u=r(6522),l=r(7120),p=r(9042),f=r(4201),h=r(3615),b=f("isConcatSpreadable"),g=h>=51||!o((function(){var e=[];return e[b]=!1,e.concat()[0]!==e})),m=function(e){if(!n(e))return!1;var t=e[b];return void 0!==t?!!t:c(e)};a({target:"Array",proto:!0,arity:1,forced:!g||!p("concat")},{concat:function(e){var t,r,a,o,c,n=d(this),p=l(n,0),f=0;for(t=-1,a=arguments.length;t<a;t++)if(m(c=-1===t?n:arguments[t]))for(o=s(c),i(f+o),r=0;r<o;r++,f++)r in c&&u(p,f,c[r]);else i(f+1),u(p,f++,c);return p.length=f,p}})},5728:(e,t,r)=>{"use strict";var a=r(9989),o=r(2960).find,c=r(7370),n="find",d=!0;n in[]&&Array(1)[n]((function(){d=!1})),a({target:"Array",proto:!0,forced:d},{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),c(n)},4284:(e,t,r)=>{"use strict";var a=r(7697),o=r(1236).EXISTS,c=r(8844),n=r(2148),d=Function.prototype,s=c(d.toString),i=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=c(i.exec);a&&!o&&n(d,"name",{configurable:!0,get:function(){try{return u(i,s(this))[1]}catch(e){return""}}})}},e=>{e.O(0,[755,393,816,633],(()=>{return t=2161,e(e.s=t);var t}));e.O()}]);