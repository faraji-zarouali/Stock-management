(self.webpackChunk=self.webpackChunk||[]).push([[958],{2161:(t,e,r)=>{var o=r(9755),n=r(8901);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function c(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==a(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==a(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===a(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r(4338),r(5728),r(228),r(8324),r(560),r(4284),r(9373),r(9903),r(9749),r(6544),r(1057),r(8932),r(9288),r(739),r(4254),r(752),r(1694),r(6265),o(document).ready((function(){var t=o("#change-status-btn");t.hide();var e=o("#product-datatable").DataTable(c({processing:!0,serverSide:!0,pagingTag:"button",lengthMenu:[[15,25,50,100],[15,25,50,100]],autoWidth:!1,ajax:{url:Routing.generate("app_product_get_list"),datasrc:function(t){t.draw=t.draw||0,t.start=t.start||0,t.length=t.length||15}},order:[[1,"asc"]],columns:[{data:"status",render:function(t,e,r){var o=t?'<input type="checkbox" class="product-checkbox" data-product-id="'+r.id+'">':'<input type="checkbox" class="product-checkbox" disabled>';return'<div style="padding-top: 3px;">\n                                '.concat(o,"\n                            </div>")},orderable:!1},{name:"p.id",data:"id",orderable:!0,searchable:!0},{name:"p.name",data:"product_name",orderable:!0,searchable:!0},{name:"p.price",data:"product_price",render:function(t){return"".concat(t," DH")}},{name:"p.quantity",data:"product_quantity",orderable:!0},{name:"s.name",data:"supplier_name",searchable:!0},{name:"c.name",data:"category_name",searchable:!0},{data:"status",render:function(t){return'<i class="'+(t?"fas fa-check text-success":"fas fa-times text-danger")+'"></i>'},orderable:!1},{data:"id",render:function(t,e,r){var o='<a class="dropdown-item edit-button" data-product-id="'.concat(t,'" >Update</a>'),n='<a class="dropdown-item extract-pdf-button" data-product-id="'.concat(t,'" >Extract PDF</a>'),a='<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">\n                            '.concat(o,"\n                            ").concat(n,"\n                        </div>");return'<div class="dropdown-table">\n                    '.concat('<button class="buttonDropDownRow" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="cursor: default;">\n                    <i class="fa fa-ellipsis-h"></i>\n                        </button>',"\n                    ").concat(a,"\n                    </div>")},orderable:!1}],pagingType:"simple_numbers",language:{loadingRecords:"&nbsp;",processing:"<span style='text-align: center; margin-top: 10px;'><i class='fa fa-spinner fa-spin fa-lg' style='font-size: 2em;'></i><br>Processing...</span>",searchPlaceholder:"Search",search:""}},"autoWidth",!1));o("body").on("click","#add-product-button",(function(){o("#add-product-modal").modal("show")})),o("#add-product-modal").on("click","#add-product-btn",(function(){var t={name:o("#newProductName").val(),price:o("#newProductPrice").val(),quantity:o("#newProductQuantity").val(),supplier:o("#newProductSupplier").find(":selected").val(),category:o("#newProductCategory").find(":selected").val()};o.ajax({url:Routing.generate("app_new_product"),type:"POST",contentType:"application/json",data:JSON.stringify(t),success:function(t,r,a){200===a.status?(e.ajax.reload(null,!1),o("#add-product-modal").modal("hide"),o("#newProductName").val(""),o("#newProductPrice").val(""),o("#newProductQuantity").val(""),o("#newProductSupplier").val(""),o("#newProductCategory").val(""),n.success("New Product Added successfully","Success")):console.error("Unexpected success status code:",a.status)},error:function(t){t.responseJSON&&t.responseJSON.errors?n.error(t.responseJSON.errors):n.error("An error occurred")}})})),o("#select_all").on("change",(function(){var r=o(this).prop("checked");o(".product-checkbox:enabled",e.rows().nodes()).prop("checked",r),t.toggle(o(".product-checkbox:checked",e.rows().nodes()).length>0)})),o("#product-datatable tbody").on("change",".product-checkbox",(function(){o("#select_all").prop("checked",o(".product-checkbox:enabled:checked").length===o(".product-checkbox:enabled").length),t.toggle(o(".product-checkbox:checked",e.rows().nodes()).length>0)})),t.toggle(o(".product-checkbox:checked",e.rows().nodes()).length>0),t.on("click",(function(){swalWithBootstrapButtons.fire({showClass:{popup:"animatedSwal flipInX faster"},position:"top",title:"Confirmation ?",text:"do u really want to desactivate this product?",type:"warning",showCancelButton:!0,showCloseButton:!0,confirmButtonClass:"btn btn-success",confirmButtonText:"<i class='fa fa-check'></i> Yes !",cancelButtonText:"<i class='fa fa-times'></i> No !"}).then((function(r){if(r.value){var a=[];o(".product-checkbox:checked",e.rows().nodes()).each((function(){a.push(o(this).data("product-id"))})),o.ajax({url:Routing.generate("app_update_product_status"),type:"POST",contentType:"application/json;charset=utf-8",data:JSON.stringify({productIds:a}),success:function(r){e.ajax.reload(null,!1),o("#select_all").prop("checked",!1),t.hide(),n.success("Status changed successfully","Success"),console.log(r)},error:function(t){console.error(t)}})}else n.info("Demande annulÃ©e !")}))})),o("body").on("click",".edit-button",(function(){var t=o(this).data("product-id");o.ajax({url:Routing.generate("app_get_product",{id:t}),type:"GET",success:function(t){o("#pId").val(t.product.id),o("#editProductName").val(t.product.name),o("#editProductPrice").val(t.product.price),o("#editProductQuantity").val(t.product.quantity),o("#editProductSupplier").val(t.product.supplier),o("#editProductCategory").val(t.product.category),o("#edit-product-modal").modal("show")}})})),o(".modal").on("click","#btnUpdateSubmit",(function(){var t={id:o("#pId").val(),name:o("#editProductName").val(),price:o("#editProductPrice").val(),quantity:o("#editProductQuantity").val(),supplier:o("#editProductSupplier").find(":selected").val(),category:o("#editProductCategory").find(":selected").val()};o.ajax({url:Routing.generate("app_update_product"),type:"POST",contentType:"application/json",data:JSON.stringify(t),success:function(t,r,a){console.log(t),200===a.status?(e.ajax.reload(null,!1),o("#edit-product-modal").modal("hide"),n.success("Update successfully","Success")):console.error("Unexpected success status code:",a.status)},error:function(t){t.responseJSON&&t.responseJSON.errors?n.error(t.responseJSON.errors):n.error("An error occurred")}})})),o("body").on("click",".extract-pdf-button",(function(){var t=o(this).data("product-id"),e=Routing.generate("export_to_pdf",{id:t});window.open(e,"_blank")}))}))},9042:(t,e,r)=>{"use strict";var o=r(3689),n=r(4201),a=r(3615),c=n("species");t.exports=function(t){return a>=51||!o((function(){var e=[];return(e.constructor={})[c]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},4338:(t,e,r)=>{"use strict";var o=r(9989),n=r(3689),a=r(2297),c=r(8999),d=r(690),u=r(6310),s=r(5565),i=r(6522),l=r(7120),p=r(9042),f=r(4201),b=r(3615),g=f("isConcatSpreadable"),h=b>=51||!n((function(){var t=[];return t[g]=!1,t.concat()[0]!==t})),y=function(t){if(!c(t))return!1;var e=t[g];return void 0!==e?!!e:a(t)};o({target:"Array",proto:!0,arity:1,forced:!h||!p("concat")},{concat:function(t){var e,r,o,n,a,c=d(this),p=l(c,0),f=0;for(e=-1,o=arguments.length;e<o;e++)if(y(a=-1===e?c:arguments[e]))for(n=u(a),s(f+n),r=0;r<n;r++,f++)r in a&&i(p,f,a[r]);else s(f+1),i(p,f++,a);return p.length=f,p}})},5728:(t,e,r)=>{"use strict";var o=r(9989),n=r(2960).find,a=r(7370),c="find",d=!0;c in[]&&Array(1)[c]((function(){d=!1})),o({target:"Array",proto:!0,forced:d},{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),a(c)},4284:(t,e,r)=>{"use strict";var o=r(7697),n=r(1236).EXISTS,a=r(8844),c=r(2148),d=Function.prototype,u=a(d.toString),s=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,i=a(s.exec);o&&!n&&c(d,"name",{configurable:!0,get:function(){try{return i(s,u(this))[1]}catch(t){return""}}})}},t=>{t.O(0,[755,393,816,633],(()=>{return e=2161,t(t.s=e);var e}));t.O()}]);